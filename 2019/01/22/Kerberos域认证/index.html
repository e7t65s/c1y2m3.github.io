

<!DOCTYPE html>
<html lang="">
<head prefix="og: http://ogp.me/ns#"><meta name="generator" content="Hexo 3.8.0">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
    <meta name="description" content="">
    <title>理解Kerberos域认证 | c1y2m3’blog</title>

    <!-- Open Graph -->
    <meta name="description" content="Active Directory(&amp;#x6D3B;&amp;#x52A8;&amp;#x76EE;&amp;#x5F55;)&amp;#x6982;&amp;#x5FF5;&amp;#xFF1A;&amp;#x200B;    Windows &amp;#x63D0;&amp;#x4F9B;&amp;#x4E86;&amp;#x4E3A;&amp;#x8BE5;&amp;#x4F01;&amp;#x4E1A;&amp;#x7BA1;&amp;#x7406;&amp;#x8D44;&amp;#x4EA7;&amp;#x3001;&amp;#x670D;&amp;#">
<meta property="og:type" content="article">
<meta property="og:title" content="理解Kerberos域认证">
<meta property="og:url" content="http://yoursite.com/2019/01/22/Kerberos域认证/index.html">
<meta property="og:site_name" content="c1y2m3’blog">
<meta property="og:description" content="Active Directory(&amp;#x6D3B;&amp;#x52A8;&amp;#x76EE;&amp;#x5F55;)&amp;#x6982;&amp;#x5FF5;&amp;#xFF1A;&amp;#x200B;    Windows &amp;#x63D0;&amp;#x4F9B;&amp;#x4E86;&amp;#x4E3A;&amp;#x8BE5;&amp;#x4F01;&amp;#x4E1A;&amp;#x7BA1;&amp;#x7406;&amp;#x8D44;&amp;#x4EA7;&amp;#x3001;&amp;#x670D;&amp;#">
<meta property="og:locale" content="default">
<meta property="og:image" content="https://www.yunzhijia.com/microblog/filesvr/5c45b9279b521a6695dd2818">
<meta property="og:image" content="https://www.yunzhijia.com/microblog/filesvr/5c45b4cd9b521a6695dd0fac">
<meta property="og:image" content="https://www.yunzhijia.com/microblog/filesvr/5c45d27450f8dd61e0744462">
<meta property="og:image" content="https://www.yunzhijia.com/microblog/filesvr/5c45d35cea3b4a77e69aa997">
<meta property="og:image" content="https://www.yunzhijia.com/microblog/filesvr/5c45d45b9b521a6695dda91d">
<meta property="og:image" content="https://www.yunzhijia.com/microblog/filesvr/5c45d4e9ea3b4a77e69aae6c">
<meta property="og:image" content="https://www.yunzhijia.com/microblog/filesvr/5c45d5099b521a6695ddab49">
<meta property="og:updated_time" content="2019-06-01T13:57:54.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="理解Kerberos域认证">
<meta name="twitter:description" content="Active Directory(&amp;#x6D3B;&amp;#x52A8;&amp;#x76EE;&amp;#x5F55;)&amp;#x6982;&amp;#x5FF5;&amp;#xFF1A;&amp;#x200B;    Windows &amp;#x63D0;&amp;#x4F9B;&amp;#x4E86;&amp;#x4E3A;&amp;#x8BE5;&amp;#x4F01;&amp;#x4E1A;&amp;#x7BA1;&amp;#x7406;&amp;#x8D44;&amp;#x4EA7;&amp;#x3001;&amp;#x670D;&amp;#">
<meta name="twitter:image" content="https://www.yunzhijia.com/microblog/filesvr/5c45b9279b521a6695dd2818">

    <script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Person",
  "email": "mailto:",
  "image": "",
  "name": "John Doe",
  "url": "http://yoursite.com"
}
</script>
    <script>
    var algoliaEnabled = false;
    
</script>

    

    
    
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
    
    
    
        <!-- stylesheets list from config.yml -->
        
        <link rel="stylesheet" href="/c1y2m3.github.io/css/aloha.css">
        
        <link rel="stylesheet" href="//cdn.bootcss.com/semantic-ui/2.2.4/semantic.min.css">
        
        <link rel="stylesheet" href="//cdn.bootcss.com/magnific-popup.js/1.1.0/magnific-popup.min.css">
        
    

</head>
<body id="body" style="margin-bottom: 0;" class="pushable">

    <div class="ui top fixed menu">
        <a class="item" id="menu-icon"><i class="sidebar icon"></i></a>
    </div>

    <div id="menu-sidebar" class="ui left vertical sidebar menu">

    <div id="sidebar-top">
        <div class="content">
            <h3>c1y2m3’blog</h3>
        </div>
    </div>
    <div class="ui container sidebar-card">
    <div class="ui people shape content">
        <div class="active side">
            <div class="ui card">
                <div class="image">
                    <img class="ui medium bordered image" src="/c1y2m3.github.io/images/avatar.jpg">
                </div>
                <div class="content">
                    <a class="header">John Doe</a>
                    
                </div>
                <div class="extra content">
                    <div class="ui list">
                        
                        
                    </div>

                </div>
                <div class="extra content">
                    <div class="ui list">
                        
                    </div>
                </div>
            </div>
        </div>
    </div>


</div>

    
    

    

    
    <a href="/index.html" class="item">
        <i class="home icon"></i>
        HOME
    </a>

    

    
</div>

    <div class="pusher body-content">
        <div id="content" class="ui main container">
            <!--<div class="ui one column grid">-->
                <!--<div class="column">-->
                    <!--<div class="ui main container">-->
                        <div id="post-Kerberos域认证" class="ui main container article-type-post">

    

    <div class="ui divided grid">

        <div class="two column row" id="article-content">

            <div class="thirteen wide computer thirteen wide tablet sixteen wide mobile column">
                

<h1 class="ui header">
    
    理解Kerberos域认证
</h1>



                <div class="article-inner">

                    <div class="article-entry" itemprop="articleBody">
                        
                        <h1 id="Active-Directory-&#x6D3B;&#x52A8;&#x76EE;&#x5F55;-&#x6982;&#x5FF5;&#xFF1A;"><a href="#Active-Directory-&#x6D3B;&#x52A8;&#x76EE;&#x5F55;-&#x6982;&#x5FF5;&#xFF1A;" class="headerlink" title="Active Directory(&#x6D3B;&#x52A8;&#x76EE;&#x5F55;)&#x6982;&#x5FF5;&#xFF1A;"></a>Active Directory(&#x6D3B;&#x52A8;&#x76EE;&#x5F55;)&#x6982;&#x5FF5;&#xFF1A;</h1><p>&#x200B;    Windows &#x63D0;&#x4F9B;&#x4E86;&#x4E3A;&#x8BE5;&#x4F01;&#x4E1A;&#x7BA1;&#x7406;&#x8D44;&#x4EA7;&#x3001;&#x670D;&#x52A1;&#x3001;&#x7F51;&#x7EDC;&#x5BF9;&#x8C61;&#x8FDB;&#x884C;&#x7EC4;&#x7EC7;&#x5316;&#x7684;&#x7BA1;&#x7406;&#xFF0C;&#x8FD9;&#x975E;&#x5E38;&#x7B26;&#x5408;&#x4F01;&#x4E1A;&#x67B6;&#x6784;&#x7684;&#x7BA1;&#x7406;&#x6A21;&#x5F0F;&#x3002;&#x800C;&#x627F;&#x8F7D;&#x5728;&#x7EBF;&#x7BA1;&#x7406;&#x673A;&#x5236;&#x7684;&#x5C31;&#x662F;&#x6D3B;&#x52A8;&#x76EE;&#x5F55;&#x3002;&#x5982;&#x679C;&#x8981;&#x642D;&#x5EFA;&#x4E00;&#x4E2A;&#x57DF;&#xFF0C;&#x5C31;&#x9700;&#x8981;&#x5B89;&#x88C5;&#x6D3B;&#x52A8;&#x76EE;&#x5F55;&#x670D;&#x52A1;&#x3002;<br>&#x200B;<br>&#x200B;    &#x6D3B;&#x52A8;&#x76EE;&#x5F55;&#x4EE5;&#x57DF;&#x540D;&#x6765;&#x5212;&#x5206;&#x57DF;&#x7684;&#x8FB9;&#x754C;&#xFF0C;&#x57DF;&#x5916;&#x5C31;&#x4E0D;&#x5C5E;&#x4E8E;&#x7BA1;&#x7406;&#x8303;&#x56F4;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8BF4;&#xFF0C;&#x4E00;&#x4E2A;&#x57DF;&#x5BF9;&#x5E94;&#x4E00;&#x4E2A;&#x57DF;&#x540D;&#xFF0C;&#x57DF;&#x4E4B;&#x95F4;&#x4E5F;&#x53EF;&#x4EE5;&#x76F8;&#x4E92;&#x4FE1;&#x4EFB;&#x3002;</p>
<ul class="ui list">
<li>Active DireCtory &#x5B58;&#x50A8;&#x4E86;&#x6709;&#x5173;&#x7F51;&#x7EDC;&#x5BF9;&#x8C61;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x5E76;&#x4E14;&#x8BA9;&#x7BA1;&#x7406;&#x5458;&#x548C;&#x7528;&#x6237;&#x80FD;&#x591F;&#x8F7B;&#x677E;&#x5730;&#x67E5;&#x627E;&#x548C;&#x4F7F;&#x7528;&#x8FD9;&#x4E9B;&#x4FE1;&#x606F;&#x3002;Active DireCtory &#x4F7F;&#x7528;&#x4E86;&#x4E00;&#x79CD;&#x7ED3;&#x6784;&#x5316;&#x7684;&#x6570;&#x636E;&#x5B58;&#x50A8;&#x65B9;&#x5F0F;&#xFF0C;&#x5E76;&#x4EE5;&#x6B64;&#x4F5C;&#x4E3A;&#x57FA;&#x7840;&#x5BF9;&#x76EE;&#x5F55;&#x4FE1;&#x606F;&#x8FDB;&#x884C;&#x5408;&#x4E4E;&#x7684;&#x903B;&#x8F91;&#x7684;&#x5206;&#x5C42;&#x7EC4;&#x7EC7;&#x3002;</li>
<li>&#x7F51;&#x7EDC;&#x5BF9;&#x8C61;&#x5206;&#x4E3A;:&#x7528;&#x6237;&#x3001;&#x7528;&#x6237;&#x7EC4;&#x3001;&#x8BA1;&#x7B97;&#x673A;&#x3001;&#x57DF;&#x3001;&#x7EC4;&#x7EC7;&#x5355;&#x4F4D;&#x4EE5;&#x53CA;&#x5B89;&#x5168; &#x7B56;&#x7565;&#x7B49;&#x3002;</li>
</ul>
<h1 id="Active-Directory-&#x6D3B;&#x52A8;&#x76EE;&#x5F55;-&#x529F;&#x80FD;"><a href="#Active-Directory-&#x6D3B;&#x52A8;&#x76EE;&#x5F55;-&#x529F;&#x80FD;" class="headerlink" title="Active Directory (&#x6D3B;&#x52A8;&#x76EE;&#x5F55;)&#x529F;&#x80FD;"></a>Active Directory (&#x6D3B;&#x52A8;&#x76EE;&#x5F55;)&#x529F;&#x80FD;</h1><ul class="ui list">
<li>&#x670D;&#x52A1;&#x5668;&#x53CA;&#x5BA2;&#x6237;&#x7AEF;&#x8BA1;&#x7B97;&#x673A;&#x7BA1;&#x7406;&#xFF1A;&#x7BA1;&#x7406;&#x670D;&#x52A1;&#x5668;&#x53CA;&#x5BA2;&#x6237;&#x7AEF;&#x8BA1;&#x7B97;&#x673A;&#x8D26;&#x6237;&#xFF0C;&#x6240;&#x6709;&#x670D;&#x52A1;&#x53CA;&#x5BA2;&#x6237;&#x7AEF;&#x52A0;&#x5165;&#x57DF;&#x7BA1;&#x7406;&#x5E76;&#x5B9E;&#x65BD;&#x7EC4;&#x7B56;&#x7565;&#x3002;</li>
<li>&#x7528;&#x6237;&#x670D;&#x52A1;&#xFF1A;&#x7BA1;&#x7406;&#x7528;&#x6237;&#x57DF;&#x8D26;&#x6237;&#x3001;&#x7528;&#x6237;&#x4FE1;&#x606F;&#x3001;&#x4F01;&#x4E1A;&#x901A;&#x8BAF;&#x5F55;(&#x4E0E;&#x7535;&#x5B50;&#x90AE;&#x4EF6;&#x7CFB;&#x7EDF;&#x96C6;&#x6210;)&#x3001;&#x7528;&#x6237;&#x7EC4;&#x7BA1;&#x7406;&#x3001;&#x7528;&#x6237;&#x8EAB;&#x4EFD;&#x8BC1;&#x3001;&#x7528;&#x6237;&#x6388;&#x6743;&#x7BA1;&#x7406;&#x7B49;&#xFF0C;&#x6309;&#x7701;&#x5B9E;&#x65BD;&#x7EC4;&#x7B56;&#x7565;&#x3002;</li>
<li>&#x8D44;&#x6E90;&#x7BA1;&#x7406;&#xFF1A;&#x7BA1;&#x7406;&#x6253;&#x5370;&#x673A;&#x3001;&#x6587;&#x4EF6;&#x5171;&#x4EAB;&#x670D;&#x52A1;&#x7B49;&#x7F51;&#x7EDC;&#x8D44;&#x6E90;&#x3002;</li>
<li>&#x684C;&#x9762;&#x914D;&#x7F6E;&#xFF1A;&#x7CFB;&#x7EDF;&#x7BA1;&#x7406;&#x5458;&#x53EF;&#x4EE5;&#x96C6;&#x4E2D;&#x7684;&#x914D;&#x7F6E;&#x5404;&#x79CD;&#x684C;&#x9762;&#x914D;&#x7F6E;&#x7B56;&#x7565;&#xFF0C;&#x5982;&#xFF1A;&#x7528;&#x6237;&#x4F7F;&#x7528;&#x57DF;&#x4E2D;&#x8D44;&#x6E90;&#x6743;&#x9650;&#x9650;&#x5236;&#xFF0C;&#x754C;&#x9762;&#x7684;&#x529F;&#x80FD;&#x7684;&#x9650;&#x5236;&#x3001;&#x5E94;&#x7528;&#x7A0B;&#x5E8F;&#x6267;&#x884C;&#x7279;&#x5F81;&#x3001;&#x7F51;&#x7EDC;&#x8FDE;&#x63A5;&#x9650;&#x5236;&#x3001;&#x5B89;&#x5168;&#x914D;&#x7F6E;&#x9650;&#x5236;&#x7B49;&#x3002;</li>
<li>&#x5E94;&#x7528;&#x7CFB;&#x7EDF;&#x652F;&#x6491;:&#x652F;&#x6301;&#x8D22;&#x52A1;&#x3001;&#x4EBA;&#x4E8B;&#x3001;&#x7535;&#x5B50;&#x90AE;&#x4EF6;&#x3001;&#x4F01;&#x4E1A;&#x4FE1;&#x606F;&#x95E8;&#x6237;&#x3001;&#x529E; &#x516C;&#x81EA;&#x52A8;&#x5316;&#x3001;&#x8865;&#x4E01;&#x7BA1;&#x7406;&#x3001;&#x9632;&#x75C5;&#x6BD2;&#x7CFB;&#x7EDF;&#x7B49;&#x5404;&#x79CD;&#x5E94;&#x7528;&#x7CFB;&#x7EDF;&#x3002;</li>
</ul>
<p>&#x5728;&#x57DF;&#x4E2D;&#xFF0C;&#x7F51;&#x7EDC;&#x5BF9;&#x8C61;&#x53EF;&#x4EE5;&#x76F8;&#x4E92;&#x8BBF;&#x95EE;&#xFF0C;&#x4F46;&#x662F;&#x5728;&#x771F;&#x5B9E;&#x60C5;&#x51B5;&#x4E2D;&#xFF0C;&#x9700;&#x8981;&#x5BF9;&#x67D0;&#x4E9B;&#x90E8;&#x95E8;&#x7684;&#x8BA1;&#x7B97;&#x673A;&#x8FDB;&#x884C;&#x9650;&#x5236;&#xFF0C;&#x4F8B;&#x5982;&#xFF1A;&#x9500;&#x552E;&#x90E8;&#x95E8;&#x4E0D;&#x80FD;&#x8BBF;&#x95EE;&#x6280;&#x672F;&#x90E8;&#x95E8;&#x7684;&#x670D;&#x52A1;&#x5668;&#x3002;</p>
<p>&#x8FD9;&#x4E2A;&#x4E2D;&#x95F4;&#x5C31;&#x9700;&#x8981;Kerberos&#x8BA4;&#x8BC1;&#x534F;&#x8BAE;&#x6765;&#x9A8C;&#x8BC1;&#x7F51;&#x7EDC;&#x5BF9;&#x8C61;&#x95F4;&#x7684;&#x6743;&#x9650;&#x3002;</p>
<h1 id="&#x57DF;&#x8BA4;&#x8BC1;&#x6240;&#x53C2;&#x4E0E;&#x7684;&#x89D2;&#x8272;-&#x4E09;&#x53EA;&#x72D7;&#x5934;"><a href="#&#x57DF;&#x8BA4;&#x8BC1;&#x6240;&#x53C2;&#x4E0E;&#x7684;&#x89D2;&#x8272;-&#x4E09;&#x53EA;&#x72D7;&#x5934;" class="headerlink" title="&#x57DF;&#x8BA4;&#x8BC1;&#x6240;&#x53C2;&#x4E0E;&#x7684;&#x89D2;&#x8272;(&#x4E09;&#x53EA;&#x72D7;&#x5934;)"></a>&#x57DF;&#x8BA4;&#x8BC1;&#x6240;&#x53C2;&#x4E0E;&#x7684;&#x89D2;&#x8272;(&#x4E09;&#x53EA;&#x72D7;&#x5934;)</h1><p>Kerberos&#x7684;&#x6807;&#x51C6;&#x662F;&#x4E09;&#x53EA;&#x72D7;&#x5934;&#xFF0C;&#x72D7;&#x5934;&#x5206;&#x522B;&#x4EE3;&#x8868;&#x4EE5;&#x4E0B;&#x89D2;&#x8272;&#xFF1A;</p>
<ul class="ui list">
<li>Client</li>
<li>Server</li>
<li>KDC(Key Distribution Center &#x5BC6;&#x94A5;&#x5206;&#x53D1;&#x4E2D;&#x5FC3;) = DC (Domain Controller)</li>
</ul>
<p>Kerberos&#x8BA4;&#x8BC1;&#x534F;&#x8BAE;&#x7684;&#x57FA;&#x7840;&#x6982;&#x5FF5;&#xFF1A;<br>    &#x7968;&#x636E;(Ticket)&#xFF1A;&#x662F;&#x7F51;&#x7EDC;&#x5BF9;&#x8C61;&#x4E92;&#x76F8;&#x8BBF;&#x95EE;&#x7684;&#x51ED;&#x8BC1;&#x3002;TGT(Ticket Granting Ticket)&#xFF1A;&#x5165;&#x573A;&#x5238;&#xFF0C;&#x901A;&#x8FC7;&#x5165;&#x573A;&#x5238;&#x80FD;&#x591F;&#x83B7;&#x5F97;&#x7968;&#x636E;&#xFF0C;&#x662F;&#x4E00;&#x79CD;&#x4E34;&#x65F6;&#x51ED;&#x8BC1;&#x7684;&#x5B58;&#x5728;&#x3002;<br>    KDC &#x8D1F;&#x8D23;&#x7BA1;&#x7406;&#x7968;&#x636E;&#x3001;&#x8BA4;&#x8BC1;&#x7968;&#x636E;&#x3001;&#x5206;&#x53D1;&#x7968;&#x636E;&#xFF0C;&#x4F46;&#x662F;KDC&#x4E0D;&#x662F;&#x4E00;&#x4E2A;&#x72EC;&#x7ACB;&#x7684;&#x670D;&#x52A1;&#xFF0C;&#x5B83;&#x662F;&#x7531;&#x4EE5;&#x4E0B;&#x670D;&#x52A1;&#x7EC4;&#x6210;&#xFF1A;</p>
<ul class="ui list">
<li>Authentication Service&#xFF1A;&#x4E3A;client &#x751F;&#x6210;TGT&#x670D;&#x52A1;</li>
<li>Tikcet Granting Service &#xFF1A;&#x4E3A;client&#x751F;&#x6210;&#x67D0;&#x4E2A;&#x670D;&#x52A1;&#x7B49;ticket<br>&#x53E6;&#x5916;&#x8FD8;&#x9700;&#x8981;&#x4ECB;&#x7ECD;&#x4E00;&#x4E2A;&#x7C7B;&#x4F3C;&#x4E8E;&#x672C;&#x673A;SAM&#x7684;&#x4E00;&#x4E2A;&#x6570;&#x636E;&#x5E93;&#xFF1A;AD&#xFF0C;&#x5168;&#x79F0;&#x53EB;account database&#xFF0C;&#x5B58;&#x50A8;&#x6240;&#x6709;client&#x7684;&#x767D;&#x540D;&#x5355;&#xFF0C;&#x53EA;&#x6709;&#x5B58; &#x5728;&#x4E8E;&#x767D;&#x540D;&#x5355;&#x7684;client&#x624D;&#x80FD;&#x987A;&#x5229;&#x7533;&#x8BF7;&#x5230;TGT&#x3002;</li>
</ul>
<p><a class="magnific-img" href="https://www.yunzhijia.com/microblog/filesvr/5c45b9279b521a6695dd2818"><img src="https://www.yunzhijia.com/microblog/filesvr/5c45b9279b521a6695dd2818" alt="" class="ui centered image"></a></p>
<p>PS:&#x4ECE;&#x7269;&#x7406;&#x5C42;&#x9762;&#x770B;&#xFF0C;AD&#x4E0E;KDC&#x5747;&#x4E3A;&#x57DF;&#x63A7;&#x5236;&#x5668;(Domain Controller)</p>
<h1 id="&#x57DF;&#x8BA4;&#x8BC1;&#x7C97;&#x7565;&#x6D41;&#x7A0B;"><a href="#&#x57DF;&#x8BA4;&#x8BC1;&#x7C97;&#x7565;&#x6D41;&#x7A0B;" class="headerlink" title="&#x57DF;&#x8BA4;&#x8BC1;&#x7C97;&#x7565;&#x6D41;&#x7A0B;"></a>&#x57DF;&#x8BA4;&#x8BC1;&#x7C97;&#x7565;&#x6D41;&#x7A0B;</h1><ul class="ui list">
<li>client &#x5411;Kerberos &#x670D;&#x52A1;&#x8BF7;&#x6C42;&#xFF0C;&#x5E0C;&#x671B;&#x83B7;&#x53D6;&#x670D;&#x52A1;server&#x7684;&#x6743;&#x9650;&#x3002;kerberos&#x5F97;&#x5230;&#x4E86;&#x8FD9;&#x4E2A;&#x6D88;&#x606F;&#xFF0C;&#x9996;&#x5148;&#x5F97;&#x5224;&#x65AD;client&#x662F;&#x5426;&#x53EF;&#x4FE1;&#x8D56;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x767D;&#x540D;&#x5355;&#x9ED1;&#x540D;&#x5355;&#x7684;&#x8BF4;&#x6CD5;&#x3002;&#x8FD9;&#x5C31;&#x662F;AS&#x670D;&#x52A1;&#x5B8C;&#x6210;&#x7684;&#x5DE5;&#x4F5C;&#xFF0C;&#x901A;&#x8FC7; &#x5728;AD&#x4E2D;&#x5B58;&#x50A8;&#x9ED1;&#x540D;&#x5355;&#x548C;&#x767D;&#x540D;&#x5355;&#x6765;&#x533A;&#x5206;client&#x3002;&#x6210;&#x529F;&#x540E;&#xFF0C;&#x901A;&#x8FC7;AS&#x8FD4;&#x56DE;TGT&#x7ED9;client&#x3002;</li>
<li>client&#x5F97;&#x5230;TGT &#x540E;&#xFF0C;&#x7EE7;&#x7EED;&#x5411;kerberos&#x8BF7;&#x6C42;&#xFF0C;&#x5E0C;&#x671B;&#x83B7;&#x53D6;&#x8BBF;&#x95EE;server&#x7684;&#x6743;&#x9650;&#x3002;kerberos&#x53C8;&#x5F97;&#x5230;&#x4E86;&#x8FD9;&#x4E2A;&#x6D88;&#x606F;&#xFF0C;&#x8FD9;&#x65F6;&#x5019;&#x901A;&#x8FC7;client &#x6D88;&#x606F;&#x4E2D;&#x7684;TGT&#xFF0C;&#x5224;&#x65AD;&#x51FA;&#x4E86;client&#x62E5;&#x6709;&#x4E86;&#x8FD9;&#x4E2A;&#x6743;&#x9650;&#xFF0C;&#x7ED9;&#x4E86;client&#x8BBF; &#x95EE;server&#x7684;&#x6743;&#x9650;ticket&#x3002;</li>
<li>client&#x5F97;&#x5230;ticket&#x540E;&#xFF0C;&#x7EC8;&#x4E8E;&#x53EF;&#x4EE5;&#x6210;&#x529F;&#x8BBF;&#x95EE;server&#x3002;&#x8FD9;&#x4E2A;ticket&#x53EA;&#x662F; &#x9488;&#x5BF9;&#x8FD9;&#x4E2A;server&#xFF0C;&#x5176;&#x4ED6;server&#x9700;&#x8981;&#x5411;TGS&#x7533;&#x8BF7;&#x3002;</li>
</ul>
<p><a class="magnific-img" href="https://www.yunzhijia.com/microblog/filesvr/5c45b4cd9b521a6695dd0fac"><img src="https://www.yunzhijia.com/microblog/filesvr/5c45b4cd9b521a6695dd0fac" alt="" class="ui centered image"></a></p>
<p>&#x9996;&#x5148;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x9700;&#x8981;&#x53D1;&#x9001;&#x81EA;&#x5DF1;&#x7684;&#x8EAB;&#x4EFD;&#x4FE1;&#x606F;&#x5230;KDC&#xFF0C;&#x8EAB;&#x4EFD;&#x4FE1;&#x606F;&#x4E2D;&#x8D77;&#x7801;&#x5305;&#x542B;&#x7528;&#x6237;&#x540D;&#xFF0C;KDC&#x6839;&#x636E;&#x7528;&#x6237;&#x540D;&#x5728;AD&#x4E2D;&#x5BFB;&#x627E;&#x662F;&#x5426;&#x5728;&#x767D;&#x540D;&#x5355;&#x4E2D;&#xFF0C;&#x7136;&#x540E;&#x6839;&#x636E;&#x7528;&#x6237;&#x540D;&#x63D0;&#x53D6;&#x5230;&#x5BF9;&#x5E94;&#x7684;NTLM Hash&#x3002;</p>
<p>KDC&#x6B64;&#x65F6;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x968F;&#x673A;&#x5B57;&#x7B26;&#x4E32;&#xFF0C;&#x53EB;Session Key&#xFF0C;&#x4F7F;&#x7528;&#x7528;&#x6237;&#x540D;&#x5BF9;&#x5E94;&#x7684;NTLM Hash&#x52A0;&#x5BC6;Session Key&#xFF0C;&#x4F5C;&#x4E3A;AS&#x6570;&#x636E;&#xFF0C;&#x4F7F;&#x7528;KDC&#x4E2D;krbtgt&#x7684;NTLM Hash&#x52A0;&#x5BC6;Session Key&#x548C;&#x5BA2;&#x6237;&#x7AEF;&#x7684;&#x4FE1;&#x606F;&#xFF0C;&#x751F;&#x6210;TGT&#x3002;</p>
<ul class="ui list">
<li>Session Key&#x7528;&#x4E8E;&#x5BA2;&#x6237;&#x7AEF;&#x5411;TGS&#x670D;&#x52A1;&#x901A;&#x4FE1;&#x3002;</li>
<li>&#x57DF;&#x5185;&#x6240;&#x6709;&#x7F51;&#x7EDC;&#x5BF9;&#x8C61;&#x7684;&#x51ED;&#x8BC1;&#x90FD;&#x5728;AD&#x4E2D;&#x4FDD;&#x5B58;</li>
</ul>
<h1 id="&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF1A;"><a href="#&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF1A;" class="headerlink" title="&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF1A;"></a>&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF1A;</h1><p><a class="magnific-img" href="https://www.yunzhijia.com/microblog/filesvr/5c45d27450f8dd61e0744462"><img src="https://www.yunzhijia.com/microblog/filesvr/5c45d27450f8dd61e0744462" alt="" class="ui centered image"></a><br><a class="magnific-img" href="https://www.yunzhijia.com/microblog/filesvr/5c45d35cea3b4a77e69aa997"><img src="https://www.yunzhijia.com/microblog/filesvr/5c45d35cea3b4a77e69aa997" alt="" class="ui centered image"></a></p>
<p>&#x5176;&#x4E2D;&#xFF0C;TGT&#x7684;&#x5230;&#x671F;&#x65F6;&#x95F4;&#x4E3A;8&#x5C0F;&#x65F6;&#xFF0C;&#x5982;&#x679C;&#x8D85;&#x8FC7;&#x4E86;8&#x5C0F;&#x65F6;&#xFF0C;&#x8FD8;&#x9700;&#x8981;&#x91CD;&#x65B0;&#x7533;&#x8BF7;TGT&#xFF0C;&#x4E0D;&#x80FD;&#x4E4B;&#x95F4;&#x8FDB;&#x5165;&#x4E0B;&#x4E00;&#x6B65;&#x83B7;&#x53D6;Ticket&#x3002;<br>Kerberos&#x662F;&#x4E00;&#x4E2A;&#x5047;&#x8BBE;&#x7F51;&#x7EDC;&#x73AF;&#x5883;&#x4E0D;&#x5B89;&#x5168;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#x80FD;&#x591F;&#x6B63;&#x5E38;&#x8FDB;&#x884C;&#x8BA4;&#x8BC1;&#x5DE5;&#x4F5C;&#x7684;&#x534F;&#x8BAE;&#x3002;<br>&#x7B2C;&#x4E00;&#x6B65;&#x4E2D;&#xFF0C;KDC&#x8FD4;&#x56DE;&#x7684;TGT&#x5BA2;&#x6237;&#x7AEF;&#x662F;&#x65E0;&#x6CD5;&#x89E3;&#x5BC6;&#x7684;&#xFF0C;&#x56E0;&#x4E3A;&#x5B83;&#x6CA1;&#x6709;KDC Hash&#xFF0C;&#x5982;&#x679C;&#x6709;&#xFF0C;&#x6211;&#x4EEC;&#x5C31;&#x53EF;&#x4EE5;&#x4F2A;&#x9020;&#x9EC4;&#x91D1;&#x7968;&#x636E;&#xFF0C;&#x8FD9;&#x4E2A;&#x662F;&#x540E;&#x8BDD;&#x4E86;&#x3002;</p>
<p><a class="magnific-img" href="https://www.yunzhijia.com/microblog/filesvr/5c45d45b9b521a6695dda91d"><img src="https://www.yunzhijia.com/microblog/filesvr/5c45d45b9b521a6695dda91d" alt="" class="ui centered image"></a><br>    &#x7B2C;&#x4E8C;&#x6B65;&#x5BA2;&#x6237;&#x7AEF;&#x9700;&#x8981;&#x63D0;&#x4F9B;TGT&#x4E0E;&#x7B2C;&#x4E00;&#x6B65;&#x4E2D;&#x4F7F;&#x7528;&#x81EA;&#x5DF1;NTLM Hash&#x89E3;&#x5BC6;&#x51FA;&#x6765;&#x7684;Session Key&#x52A0;&#x5BC6;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x4FE1;&#x606F;&#x8DDF;&#x65F6;&#x95F4;&#x6233;&#x3002;<br>&#x5982;&#x679C;&#x5047;&#x8BBE;&#x8FD9;&#x4E2A;&#x6570;&#x636E;&#x88AB;&#x4E2D;&#x95F4;&#x4EBA;&#x7A83;&#x53D6;&#x5230;&#xFF0C;&#x4E5F;&#x65E0;&#x6CD5;&#x5728;&#x6BB5;&#x65F6;&#x95F4;&#x5185;&#x7834;&#x89E3;&#xFF0C;&#x56E0;&#x4E3A;KDC&#x4F1A;&#x6821;&#x9A8C;&#x65F6;&#x95F4;&#x6233;&#x3002;</p>
<p>KDC&#x63A5;&#x5230;TGT&#x4E0E;&#x5176;&#x4ED6;&#x5185;&#x5BB9;&#x540E;&#xFF0C;&#x4F1A;&#x9996;&#x5148;&#x89E3;&#x5BC6;TGT&#xFF0C;&#x53EA;&#x6709;KDC&#x53EF;&#x4EE5;&#x89E3;&#x5BC6;TGT&#xFF0C;&#x4ECE;TGT&#x4E2D;&#x63D0;&#x53D6;&#x5230;Session Key&#xFF0C;&#x518D;&#x4F7F;&#x7528;Session Key&#x89E3;&#x5BC6;&#x5176;&#x4ED6;&#x5185;&#x5BB9;&#xFF0C;&#x89E3;&#x5BC6;&#x51FA;&#x6765;&#x7684;&#x5185;&#x5BB9;&#x540C;TGT&#x4E2D;&#x7684;&#x4FE1;&#x606F;&#x8FDB;&#x884C;&#x6821;&#x9A8C;&#x6765;&#x786E;&#x8BA4;&#x5BA2;&#x6237;&#x7AEF;&#x662F;&#x5426;&#x53D7;&#x4FE1;&#x3002;</p>
<p>&#x9A8C;&#x8BC1;&#x901A;&#x8FC7;&#x540E;&#xFF0C;&#x5C31;&#x4F1A;&#x751F;&#x6210;&#x4E00;&#x4E2A;&#x65B0;&#x7684;Session Key&#xFF0C;&#x6211;&#x4EEC;&#x79F0;&#x4E4B;&#x4E3A;Server Session Key&#xFF0C;&#x8FD9;&#x4E2A;Server Session Key&#x4E3B;&#x8981;&#x7528;&#x4E8E;&#x548C;&#x670D;&#x52A1;&#x5668;&#x8FDB;&#x884C;&#x901A;&#x4FE1;&#x3002;&#x540C;&#x65F6;&#x8FD8;&#x4F1A;&#x751F;&#x6210;&#x4E00;&#x4E2A;Ticket&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x6700;&#x540E;&#x7684;&#x7968;&#x636E;&#x4E86;&#x3002;</p>
<p>Ticket&#x7EC4;&#x6210;&#x5982;&#x4E0B;&#xFF1A;<br><a class="magnific-img" href="https://www.yunzhijia.com/microblog/filesvr/5c45d4e9ea3b4a77e69aae6c"><img src="https://www.yunzhijia.com/microblog/filesvr/5c45d4e9ea3b4a77e69aae6c" alt="" class="ui centered image"></a><br>Server Hash&#xFF1A;&#x8FD9;&#x4E2A;Hash&#x662F;&#x5728;AD&#x4E2D;&#x670D;&#x52A1;&#x5668;&#x8BA1;&#x7B97;&#x673A;&#x7684;NTLM Hash<br><a class="magnific-img" href="https://www.yunzhijia.com/microblog/filesvr/5c45d5099b521a6695ddab49"><img src="https://www.yunzhijia.com/microblog/filesvr/5c45d5099b521a6695ddab49" alt="" class="ui centered image"></a><br>&#x5728;&#x7B2C;&#x4E09;&#x6B65;&#x91CC;&#xFF0C;&#x5BA2;&#x6237;&#x7AEF;&#x5411;&#x670D;&#x52A1;&#x5668;&#x8BF7;&#x6C42;&#xFF0C;&#x9700;&#x8981;&#x63D0;&#x4F9B;Ticket&#xFF0C;Server Session Key&#x52A0;&#x5BC6;&#x7684;&#x5BA2;&#x6237;&#x7AEF;&#x4FE1;&#x606F;&#x4E0E;&#x65F6;&#x95F4;&#x6233;&#x3002;</p>
<h1 id="&#x6CE8;&#x610F;&#xFF1A;"><a href="#&#x6CE8;&#x610F;&#xFF1A;" class="headerlink" title="&#x6CE8;&#x610F;&#xFF1A;"></a>&#x6CE8;&#x610F;&#xFF1A;</h1><ul class="ui list">
<li><p>Kerberos &#x534F;&#x8BAE;&#x8BBE;&#x8BA1;&#x7684;&#x601D;&#x8DEF;&#x5C31;&#x662F;&#x7528;&#x6765;&#x5728;&#x4E0D;&#x53D7;&#x4FE1;&#x7684;&#x73AF;&#x5883;&#x4E0B;&#x8FDB;&#x884C;&#x8BA4;&#x8BC1;&#x7684;&#x534F;&#x8BAE;&#x3002;</p>
</li>
<li><p>krbtgt &#x8D26;&#x53F7;&#x7684; NTLM Hash &#x7406;&#x8BBA;&#x4E0A;&#x53EA;&#x5B58;&#x5728;&#x4E8E; KDC &#x4E2D;&#x3002;&#x8FD9;&#x610F;&#x5473;&#x7740; TGT &#x53EA;&#x80FD;&#x7531; KDC &#x6765;&#x89E3;&#x5BC6;&#x3002;&#x5982;&#x679C;krbtgt &#x8D26;&#x53F7;&#x7684;NTLM Hash&#x6CC4;&#x9732;&#x4E86;&#xFF0C;&#x90A3;&#x4E48; TGT &#x5C31;&#x80FD;&#x88AB;&#x89E3;&#x5BC6;&#x751A;&#x81F3;&#x4F2A;&#x9020;&#x3002;&#x4F2A;&#x9020;&#x7684; TGT &#x53EB;&#x505A;&#x9EC4;&#x91D1;&#x7968;&#x636E;&#x3002;</p>
</li>
<li><p>Ticket &#x662F;&#x7531;&#x670D;&#x52A1;&#x5668;&#x8BA1;&#x7B97;&#x673A;&#x672C;&#x8EAB;&#x7684; NTLM Hash &#x52A0;&#x5BC6;&#x7684;&#xFF0C;Client &#x4E0D;&#x80FD;&#x89E3;&#x5BC6;&#x3002;&#x5982;&#x679C;&#x8BE5;Hash &#x6CC4;&#x9732;&#xFF0C;&#x90A3;&#x4E48;&#x5C31;&#x53EF;&#x4EE5;&#x89E3;&#x5BC6;&#x751A;&#x81F3;&#x4F2A;&#x9020; Ticket&#x3002;&#x4F2A;&#x9020;&#x7684; Ticket &#x53EB;&#x505A;&#x767D;&#x94F6;&#x7968;&#x636E;&#x3002;</p>
</li>
<li><p>&#x5728;&#x4E0A;&#x8FF0;&#x7684;&#x6D41;&#x7A0B;&#x4E2D;&#xFF0C;&#x6D89;&#x53CA;&#x5230;&#x65F6;&#x95F4;&#x6233; timestamp&#xFF0C;&#x7531;&#x4E8E;&#x5B83;&#x7684;&#x5B58;&#x5728;&#xFF0C;&#x624D;&#x4F7F;&#x5F97;&#x88AB;&#x7B2C;&#x4E09;&#x65B9;&#x83B7;&#x53D6;&#x4E86;&#x52A0;&#x5BC6;&#x4FE1;&#x606F; A &#x3001;B&#x3001;TGT&#x4E0D;&#x4F1A;&#x5728;&#x77ED;&#x65F6;&#x95F4;&#x5185;&#x88AB;&#x66B4;&#x529B;&#x7834;&#x89E3;&#x3002;timestamp &#x4E00;&#x822C;&#x65F6;&#x95F4;&#x4E3A;8&#x5C0F;&#x65F6;&#x3002;</p>
</li>
<li><p>Kerberos &#x534F;&#x8BAE;&#x548C; NTLM &#x534F;&#x8BAE;&#x90FD;&#x4F1A;&#x4F7F;&#x7528; NTLM Hash &#x5BF9;&#x751F;&#x6210;&#x7684;&#x4EFB;&#x610F;&#x968F;&#x673A;&#x6570;&#x52A0;&#x5BC6;&#xFF0C;&#x7136;&#x540E;&#x6BD4;&#x5BF9;&#x7ED3;&#x679C;&#x3002; Kerberos &#x7684;&#x4E3B;&#x8981;&#x533A;&#x522B;&#x5728;&#x4E8E;&#x6DFB;&#x52A0;&#x4E86;&#x7B2C;&#x4E09;&#x65B9;&#x2014;&#x2014;-KDC&#x53C2;&#x4E0E;&#x5230;&#x8BA4;&#x8BC1;&#x8FC7;&#x7A0B;&#x4E2D;&#x3002;</p>
</li>
<li><p>Client info &#x4E2D;&#x5305;&#x542B;&#x57DF;&#x540D;&#x4FE1;&#x606F;&#x3001;Client &#x540D;&#x79F0;&#x7B49;</p>
</li>
</ul>
<p>&#x6821;&#x9A8C;&#x901A;&#x8FC7;&#x540E;&#xFF0C;&#x8BA4;&#x8BC1;&#x6210;&#x529F;&#xFF0C;&#x8BE5;&#x7968;&#x636E;&#x4F1A;&#x4E00;&#x76F4;&#x5B58;&#x5728;&#x5BA2;&#x6237;&#x7AEF;&#x5185;&#x5B58;&#x4E2D;&#x3002;</p>

                        
                    </div>

                    
                    
                    

                    <div class="description post-description">
    <span class="post-description-item">
        <time datetime="2019-01-22T02:51:14.000Z" itemprop="datePublished">2019-01-22</time>

    </span>
    <span class="post-description-item">
        
    </span>
</div>

                </div>
                
                <div id="pagination" class="nav-web ui text container pagination">

    <div class="ui stackable two column divided grid container">
        <div class="row">
            <div class="column nav-left">
                

                <a href="/c1y2m3.github.io/2019/02/06/两种使用python实现SSRF检测/" class="ui tiny button">

                    <i class="angle left icon"></i>
                    
                    python实现SSRF检测脚本
                    

                </a>

                
            </div>
            <div class="column nav-right">
                

                <a href="/c1y2m3.github.io/2019/01/21/浅析Windows网络认证/" class="ui tiny button">
                    
                    浅析Windows网络认证
                    
                    <i class="angle right icon"></i></a>
                
            </div>
        </div>
    </div>

</div>
                
            </div>

            
            <div class="three wide computer three wide tablet column">

                <div class="ui sticky article-toc" id="article-toc">
                    <!-- toc -->
                    <ol class="ui ordered list"><li><a href="#Active-Directory-活动目录-概念："><span>Active Directory(活动目录)概念：</span></a></li><li><a href="#Active-Directory-活动目录-功能"><span>Active Directory (活动目录)功能</span></a></li><li><a href="#域认证所参与的角色-三只狗头"><span>域认证所参与的角色(三只狗头)</span></a></li><li><a href="#域认证粗略流程"><span>域认证粗略流程</span></a></li><li><a href="#数据结构："><span>数据结构：</span></a></li><li><a href="#注意："><span>注意：</span></a></li></ol>
                </div>

            </div>
            

        </div>
    </div>
</div>


                    <!--</div>-->
                <!--</div>-->
            <!--</div>-->
        </div>
        <div class="ui vertical footer segment">
    <div class="ui center aligned container">
        <div class="ui inverted section divider"></div>
        &copy; 2019 <a href="/">John Doe</a>,
        Powered by <a href="https://github.com/henryhuang/hexo-theme-aloha" target="_blank">Aloha</a> and <a href="http://hexo.io/" target="_blank">Hexo</a>.
    </div>
</div>

    </div>




<!-- scripts list from theme config.yml -->

<script src="//cdn.bootcss.com/jquery/3.1.0/jquery.min.js"></script>

<script src="//cdn.bootcss.com/semantic-ui/2.2.4/semantic.min.js"></script>

<script src="//cdn.bootcss.com/algoliasearch/3.18.1/algoliasearch.min.js"></script>

<script src="//cdn.bootcss.com/algoliasearch-helper-js/2.13.0/algoliasearch.helper.min.js"></script>

<script src="/c1y2m3.github.io/js/semantic-ui-algolia.js"></script>

<script src="/c1y2m3.github.io/js/aloha-events.js"></script>



</body>
</html>
